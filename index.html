<!doctype html>
<html lang="en">
<style>
    * {
        color: #444;
    }
    h1 {
        text-align: center;
    }
    .heart {
        width: 50px;
        margin: 0 0 -10px 0;
    }
    a {
        font-weight: bold;
    }

</style>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />   
    <title>WunderPreview Example</title>
    <script>
    document.addEventListener("DOMContentLoaded", () => {
        const baseUrl = '{{API_BASE_URL}}';
        const apiURL = baseUrl + 'api/pokemon/';

        fetch(apiURL)
            .then(response => response.json())
            .then((data) => {
                console.log(data);
                const results = data['results'];

                var el = document.querySelector('#pokemonList');
                for(i=0; i<results.length; i++) {
                    var pokemon = results[i];
                    el.innerHTML = el.innerHTML + '<li>' + pokemon['number'] + ': ' + pokemon['name'] + ' (' + pokemon['type1'] + '/' + pokemon['type2'] + ')</li>\n';
                }
            });
    });        
    </script>
</head>

<body class="antialiased">
    <h1>WunderPreview <img src="heart.gif" class="heart" /> Vanilla Javascript</h1>
    <p>
        This show cases the <b>communication between several previews</b> in WunderPreview.
    </p>
    <p>
        This preview of a <a href="https://github.com/WunderStack/demo-vanilla-js" target="_blank">Project in vanilla Javascript</a> reads a list of Pokémon from a REST API defined in a preview of <a href="https://github.com/WunderStack/demo-django" target="_blank">the demo Django Project</a>.
    </p>
    <p>
        This preview knows where to find the backend API through the <code>API_BASE_URL</code> environment variable that was set in the settings of this repository in <a href="https://wunderpreview.com" target="_blank">WunderPreview</a>.
    </p>
    <p>
        For more information see the documentation: <a href="https://wunderpreview.com/docs/how-to-use-env-vars-during-build-time-and-run-time" target="_blank">How to use env vars during build-time and run-time</a>.
    </p>
    <hr/>

    <img src="pikachu1.gif"/> <img src="pikachu2.gif"/> <img src="pikachu3.gif"/>

    <h2>List of Pokémon:</h2>
    <ul id="pokemonList">
    </ul>
</body>

</html>